<!DOCTYPE html>
<html>

<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="./home.html">Math Trainer</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="./home.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page"
                            href="./multiplication-trainer.html">Multiplication</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Settings</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <br>

        <div class="row justify-content-start">
            <div class="col-6 border border-4 text-center">
                <h1 class="display-4">
                    <span id="question">5 x 7</span><span> = </span>
                    <span id="correctAnswer"></span>
                    <br>
                    <br>
                </h1>
                <h2>
                <p id="result"></p>
            </h2>
            </div>
            <div class="col-4 border border-4">
                <div class="container-sm pt-3">

                    <div id="usrAnwserDiv" class="mb-3 row">
                        <label for="userAnswer" class="form-label">Enter your answer</label>
                        <input id="userAnswer" type="text" class="form-control" value="" />
                    </div>

                    <div class="mb-3 row">
                        <button id="btnSubmit" class="btn btn-primary" type="submit" onclick="processAnswer();">Submit
                        </button>
                    </div>
                    <div class="mb-3 row">
                        <button id="btnNext" class="btn btn-secondary" type="submit" onclick="nextQuestion();">Next
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <span id="firstNumber" style="display: none;">2</span>
        <span id="secondNumber" style="display: none;">2</span>
    </div>

</body>
<script type="text/javascript">

    var input = document.getElementById("userAnswer");
    input.addEventListener("keydown", function (event) {
        if (event.keyCode === 13) {
            event.preventDefault();
            document.getElementById("btnSubmit").click();
        }
    });

    function processAnswer() {
        var usrAnwser = document.getElementById("userAnswer");
        if (usrAnwser.value.toString() == "") {
            alert("Please enter your answer and then submit");
            return;
        }

        var bSubmit = document.getElementById("btnSubmit");
        bSubmit.style.display = 'none';

        var divAnswer = document.getElementById("usrAnwserDiv");
        divAnswer.style.display = 'none';

        var fn = document.getElementById("firstNumber");
        var ln = document.getElementById("secondNumber");

        var result = parseInt(fn.textContent) * parseInt(ln.textContent);

        var correctAnswer = document.getElementById("correctAnswer");
        correctAnswer.innerText = result.toString();

        var r = document.getElementById("result");

        if (usrAnwser.value.toString() == result.toString()) {
            r.innerText = "Hurray!!! "  + usrAnwser.value.toString() + " is the RIGHT answer!";
            r.className = "text-success";
        }
        else {
            r.innerText = "OOPS!!! " + usrAnwser.value.toString() + " is NOT the correct answer!";
            r.className = "text-danger";
        }

        usrAnwser.value = "";
        document.getElementById("btnNext").focus();
    }

    function nextQuestion() {
        var fn = document.getElementById("firstNumber");
        var ln = document.getElementById("secondNumber");

        var firstNum = "0";
        var secondNum = "0";

        do {
            firstNum = getRandomInt(10).toString();
            secondNum = getRandomInt(10).toString();
        }
        while (firstNum == "0" && secondNum == "0");

        fn.innerText = firstNum;
        ln.innerText = secondNum;

        var questionBuilt = fn.innerText + " X " + ln.innerText;
        var q = document.getElementById("question");
        q.innerText = questionBuilt;

        var r = document.getElementById("result");
        r.innerText = "";

        var correctAnswer = document.getElementById("correctAnswer");
        correctAnswer.innerText = "?";

        var bSubmit = document.getElementById("btnSubmit");
        bSubmit.style.display = 'block';

        var divAnswer = document.getElementById("usrAnwserDiv");
        divAnswer.style.display = 'block';

        document.getElementById("userAnswer").focus();

    }

    function getRandomInt(max) {
        return Math.floor(Math.random() * max);
    }

    window.onload = nextQuestion();
    //window.onload = showQuestion();

</script>


</html>